---
title: "Ejecución vía API"
description: "Aprende cómo invocar asistentes de Devic mediante la API para integrarlos con tus aplicaciones o flujos personalizados."
---

Los asistentes de **Devic** pueden ejecutarse no solo desde la interfaz visual o el widget, sino también de forma **programática** mediante la API pública.\
Esto permite integrarlos en sistemas externos, automatizar procesos o conectarlos con otras plataformas corporativas.

Cada asistente dispone de un **endpoint dedicado** que permite enviar mensajes, iniciar conversaciones nuevas o continuar conversaciones existentes, todo mediante solicitudes HTTP estándar.

---

## Endpoint base

Cada asistente cuenta con una URL única para enviar mensajes:

`POST https://api.devic.ai/api/v1/assistants/{assistant_id}/messages`

El parámetro `{assistant_id}` se obtiene desde la vista del asistente, en el cuadro de diálogo **“Get Code”**.

![Vista del panel API del asistente](/get-code-assistant.png)

## 

![Vista del panel API del asistente](/get-code-documentation-detail.png)

---

## Ejemplo de uso

Puedes invocar un asistente utilizando cualquier lenguaje que soporte solicitudes HTTP (JavaScript, Python, cURL, etc.).\
A continuación se muestra un ejemplo en **JavaScript** utilizando `fetch`:

```js
    const response = await fetch('https://api.devic.ai/api/v1/assistants/{assistant_id}/messages', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': 'Bearer YOUR_API_TOKEN'
      },
      body: JSON.stringify({
        message: 'Hola, ¿puedes ayudarme con el reporte técnico?',
        chatUuid: null
      })
    })

    const data = await response.json()
    console.log(data)
```

Este ejemplo crea una **nueva conversación** con el asistente, enviando un mensaje inicial.\
El campo `chatUuid` permite identificar la sesión o conversación activa; si se envía como `null`, se creará una nueva.

---

## Continuar una conversación existente

Para continuar una conversación ya iniciada, basta con incluir el identificador de chat (`chatUuid`) obtenido en la primera respuesta:

```js
    const response = await fetch('https://api.devic.ai/api/v1/assistants/{assistant_id}/messages', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': 'Bearer YOUR_API_TOKEN'
      },
      body: JSON.stringify({
        message: 'Gracias, continúa con el siguiente paso del informe.',
        chatUuid: 'existing-chat-id'
      })
    })

    const data = await response.json()
    console.log(data)
```

---

## Autenticación

Todas las solicitudes deben incluir un encabezado de autorización con un **token válido**:

Authorization: Bearer YOUR_API_TOKEN

El token se obtiene desde tu cuenta en **Devic** y debe protegerse con cuidado, ya que otorga acceso a la ejecución del asistente.

---

## Respuesta de la API

La API devuelve un objeto JSON con información sobre la conversación y la respuesta generada por el asistente.\
Un ejemplo simplificado de respuesta sería:

```js
    {
      "chatUuid": "e1f9d83b-7c9f-4d6b-8c1b-43b214f093e2",
      "message": "Claro, puedo ayudarte con el reporte técnico. ¿Qué parte deseas revisar?",
      "tokens_used": 845,
      "timestamp": "2025-10-29T14:58:25Z"
    }
```

---

## Parámetros admitidos

| Campo        | Tipo                | Descripción                                                               |
| ------------ | ------------------- | ------------------------------------------------------------------------- |
| **message**  | string              | Texto del mensaje enviado al asistente.                                   |
| **chatUuid** | string o null       | Identificador del chat. Si se deja vacío, se crea una nueva conversación. |
| **context**  | objeto _(opcional)_ | Información adicional que puede usarse para personalizar la interacción.  |
| **metadata** | objeto _(opcional)_ | Datos personalizados (por ejemplo, ID de usuario o idioma).               |

---

## Buenas prácticas

- **`Reutiliza el chatUuid`** para mantener el contexto conversacional.
- **Controla el número de peticiones** para evitar sobrecargas o costes innecesarios.
- **Guarda las respuestas** si necesitas trazabilidad o registro de conversaciones.
- **Utiliza siempre HTTPS**, ya que la API no admite conexiones inseguras.

---

## En resumen

| Elemento                       | Propósito                                                    |
| ------------------------------ | ------------------------------------------------------------ |
| **POST /assistants//messages** | Enviar mensajes o crear conversaciones con el asistente.     |
| **chatUuid**                   | Mantiene la continuidad de la conversación.                  |
| **Authorization header**       | Controla el acceso mediante token.                           |
| **Response JSON**              | Contiene el mensaje del asistente y los metadatos asociados. |

---

<Card title="Próximo paso" icon="database" href="/devic/databases">
  Aprende cómo crear, consultar y gestionar bases de datos dentro de Devic para potenciar las capacidades de tus agentes y asistentes.
</Card>
